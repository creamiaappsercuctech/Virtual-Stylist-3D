<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SerCucTech ‚Ä¢ Virtual Stylist 2D</title>
  <meta name="theme-color" content="#0b0b12" />
  <style>
    :root{
      --bg:#0b0b12; --txt:#f2f2f5; --muted:#a9a9b6; --line:rgba(255,255,255,.10);
      --card:rgba(255,255,255,.03); --card2:rgba(255,255,255,.02);
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    }
    body{ margin:0; background:var(--bg); color:var(--txt); }
    header{
      position:sticky; top:0; z-index:50;
      background:rgba(11,11,18,.86); backdrop-filter:blur(10px);
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .wrap{ max-width:1100px; margin:0 auto; padding:14px; }
    .row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .brand{
      width:40px;height:40px;border-radius:16px;display:grid;place-items:center;
      background:linear-gradient(135deg,rgba(255,213,106,.95),rgba(110,255,168,.35));
      color:#111;font-weight:900;
    }
    .sub{ color:var(--muted); font-size:12px; line-height:1.35; }
    .tabs{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
    .tab{
      border:1px solid var(--line);
      background:var(--card2);
      color:var(--txt);
      padding:10px 14px;
      border-radius:999px;
      cursor:pointer;
      user-select:none;
    }
    .tab.active{
      background:rgba(255,213,106,.12);
      border-color:rgba(255,213,106,.25);
    }
    .grid{ display:grid; grid-template-columns: 1.15fr .85fr; gap:14px; }
    @media(max-width:980px){ .grid{ grid-template-columns:1fr; } }
    .card{
      border:1px solid var(--line);
      background:var(--card2);
      border-radius:18px;
      overflow:hidden;
    }
    .card h2{
      margin:0; font-size:14px;
      padding:12px 14px;
      border-bottom:1px solid rgba(255,255,255,.06);
      display:flex; justify-content:space-between; align-items:center; gap:10px;
    }
    .card .body{ padding:12px 14px; }
    .pill{
      display:inline-flex; gap:8px; align-items:center; padding:6px 10px;
      border-radius:999px; border:1px solid var(--line);
      background:var(--card); color:var(--muted); font-size:12px;
    }
    .pill b{ color:var(--txt); }
    label{ display:block; font-size:12px; color:var(--muted); margin:10px 0 6px; }
    input[type="range"], input[type="text"], select{
      width:100%; box-sizing:border-box;
      padding:10px; border-radius:12px;
      border:1px solid var(--line);
      background:var(--card);
      color:var(--txt);
      outline:none;
    }
    input[type="file"]{ width:100%; }
    .btn{
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.04);
      color:var(--txt);
      padding:10px 12px;
      border-radius:14px;
      cursor:pointer;
    }
    .btn.primary{
      background:rgba(255,213,106,.14);
      border-color:rgba(255,213,106,.25);
    }
    .btn.danger{
      background:rgba(255,120,120,.12);
      border-color:rgba(255,120,120,.25);
    }

    /* Stage */
    #stageWrap{
      border:1px solid rgba(255,255,255,.08);
      background:#090912;
      border-radius:16px;
      overflow:hidden;
      position:relative;
      min-height:520px;
    }
    @media(max-width:980px){ #stageWrap{ min-height:440px; } }
    #stage{
      width:100%;
      height:auto;
      display:block;
      background:#090912;
      touch-action:none; /* drag */
    }
    .hint{
      position:absolute; left:10px; right:10px; bottom:10px;
      background:rgba(0,0,0,.45);
      border:1px solid rgba(255,255,255,.10);
      color:rgba(255,255,255,.92);
      padding:8px 10px;
      border-radius:12px;
      font-size:12px;
      pointer-events:none;
    }

    /* Wardrobe cards */
    .cards{ display:grid; grid-template-columns:repeat(2,1fr); gap:12px; }
    @media(max-width:680px){ .cards{ grid-template-columns:1fr; } }
    .item{
      border:1px solid var(--line);
      background:var(--card2);
      border-radius:16px;
      overflow:hidden;
      padding:12px;
      display:flex; gap:12px;
      align-items:flex-start;
    }
    .thumb{
      width:84px;height:84px;border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.03);
      display:grid; place-items:center;
      overflow:hidden;
      flex:0 0 auto;
    }
    .thumb img{ width:100%; height:100%; object-fit:contain; display:block; }
    .meta{ flex:1 1 auto; min-width:0; }
    .meta .t{ font-weight:900; font-size:13px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .meta .s{ font-size:12px; color:var(--muted); margin-top:2px; }
    .meta .p{ margin-top:8px; display:flex; gap:8px; flex-wrap:wrap; }

    /* error box */
    #errBox{
      position:fixed; left:10px; right:10px; bottom:10px; z-index:9999;
      border:1px solid rgba(255,110,110,.35);
      background:rgba(255,110,110,.08);
      color:rgba(255,255,255,.95);
      border-radius:14px;
      padding:10px 12px;
      display:none;
      white-space:pre-wrap;
      font-size:12px;
    }
  </style>
</head>
<body>
<header>
  <div class="wrap">
    <div class="row" style="justify-content:space-between">
      <div class="row">
        <div class="brand">SC</div>
        <div>
          <div style="font-weight:900">SerCucTech ‚Ä¢ Virtual Stylist 2D</div>
          <div class="sub">Avatar = la tua foto (realistico) + outfit overlay PNG trasparenti</div>
        </div>
      </div>
      <span class="pill">Stato: <b id="status">OK</b></span>
    </div>
    <div class="tabs">
      <div class="tab active" data-tab="studio">Studio</div>
      <div class="tab" data-tab="guardaroba">Guardaroba</div>
      <div class="tab" data-tab="guida">Guida</div>
    </div>
  </div>
</header>

<main class="wrap">
  <!-- STUDIO -->
  <section id="studio" class="section" style="display:block">
    <div class="grid">
      <div class="card">
        <h2><span>Preview (tu + vestito)</span><span class="sub">trascina per spostare</span></h2>
        <div class="body">
          <div id="stageWrap">
            <canvas id="stage"></canvas>
            <div class="hint" id="hint">
              1) Carica foto persona. 2) Carica un vestito PNG (trasparente). 3) Regola scala/posizione.
            </div>
          </div>

          <div style="height:10px"></div>

          <div class="row">
            <button class="btn primary" id="btnExport">üì∏ Scatta look (PNG)</button>
            <button class="btn" id="btnResetPose">‚Ü©Ô∏è Reset posizione</button>
            <button class="btn danger" id="btnClearAll">üßπ Svuota tutto</button>
          </div>
        </div>
      </div>

      <div class="card">
        <h2><span>Foto persona + regolazione</span><span class="sub">zoom e posizione</span></h2>
        <div class="body">
          <label>Profilo</label>
          <select id="profile">
            <option value="uomo">Uomo</option>
            <option value="donna">Donna</option>
            <option value="bambino">Bambino</option>
            <option value="bambina">Bambina</option>
          </select>

          <label>Carica foto persona (frontale)</label>
          <input id="personFile" type="file" accept="image/*" />

          <div class="row" style="margin-top:10px">
            <span class="pill">Persona: <b id="personOk">NO</b></span>
            <span class="pill">Vestito: <b id="clothOk">NO</b></span>
          </div>

          <label>Zoom persona</label>
          <input id="personScale" type="range" min="0.5" max="2.2" step="0.01" value="1.0"/>

          <label>Sposta persona (X)</label>
          <input id="personX" type="range" min="-250" max="250" step="1" value="0"/>

          <label>Sposta persona (Y)</label>
          <input id="personY" type="range" min="-300" max="300" step="1" value="0"/>

          <div style="height:12px"></div>

          <div class="sub">
            Suggerimento: scegli una foto con <b>corpo intero</b> e sfondo semplice.
          </div>
        </div>
      </div>
    </div>

    <div style="height:14px"></div>

    <div class="card">
      <h2><span>Controlli vestito (overlay)</span><span class="sub">PNG trasparente</span></h2>
      <div class="body">
        <label>Carica vestito (PNG trasparente)</label>
        <input id="clothFile" type="file" accept="image/*" />

        <label>Scala vestito</label>
        <input id="clothScale" type="range" min="0.4" max="2.8" step="0.01" value="1.0"/>

        <label>Sposta vestito (X)</label>
        <input id="clothX" type="range" min="-250" max="250" step="1" value="0"/>

        <label>Sposta vestito (Y)</label>
        <input id="clothY" type="range" min="-300" max="300" step="1" value="0"/>

        <label>Opacit√† vestito</label>
        <input id="clothAlpha" type="range" min="0.15" max="1.0" step="0.01" value="1.0"/>

        <div class="row" style="margin-top:10px">
          <button class="btn" id="btnBringFront">Vestito sopra</button>
          <button class="btn" id="btnBringBack">Vestito sotto</button>
        </div>

        <div style="height:10px"></div>
        <div class="sub">
          Per un effetto realistico: PNG con trasparenza e vestito ‚Äúfrontale‚Äù (tipo catalogo).
        </div>
      </div>
    </div>
  </section>

  <!-- GUARDAROBA -->
  <section id="guardaroba" class="section" style="display:none">
    <div class="card">
      <h2><span>Guardaroba (card)</span><span class="sub">carichi PNG outfit e li provi</span></h2>
      <div class="body">
        <div class="row">
          <button class="btn primary" id="btnAddItem">‚ûï Aggiungi capo (PNG)</button>
          <button class="btn" id="btnClearWardrobe">Svuota guardaroba</button>
          <span class="pill">Capi: <b id="wardCount">0</b></span>
        </div>
        <input id="wardFile" type="file" accept="image/*" style="display:none" />

        <div style="height:12px"></div>
        <div class="cards" id="wardrobe"></div>

        <div style="height:10px"></div>
        <div class="sub">
          Nota: qui salviamo solo ‚Äúminiatura‚Äù e dati leggeri. Se carichi immagini enormi, il telefono pu√≤ soffrire.
        </div>
      </div>
    </div>
  </section>

  <!-- GUIDA -->
  <section id="guida" class="section" style="display:none">
    <div class="card">
      <h2><span>Guida</span><span class="sub">come farlo in 30 secondi</span></h2>
      <div class="body">
        <div class="sub">
          <b>1)</b> Vai su ‚ÄúStudio‚Äù e carica la foto della persona (corpo intero).<br>
          <b>2)</b> Carica un vestito <b>PNG trasparente</b> (fronte).<br>
          <b>3)</b> Regola scala e posizione del vestito finch√© cade bene.<br>
          <b>4)</b> Premi ‚ÄúScatta look‚Äù per salvare un PNG finale.<br><br>
          Se vuoi, nella prossima versione aggiungo: <b>ritaglio automatico persona</b> (AI segmentazione) e vestiti ‚Äúancorati‚Äù alle spalle.
        </div>
      </div>
    </div>
  </section>
</main>

<div id="errBox"></div>

<script>
  const status = document.getElementById("status");
  const errBox = document.getElementById("errBox");

  function showErr(msg){
    errBox.style.display = "block";
    errBox.textContent = "ERRORE:\n" + msg;
    status.textContent = "Errore";
  }
  window.addEventListener("error", (e)=> showErr(e.message || String(e.error||e)));
  window.addEventListener("unhandledrejection", (e)=> showErr(String(e.reason||e)));

  // Tabs
  const tabs = [...document.querySelectorAll(".tab")];
  const sections = {
    studio: document.getElementById("studio"),
    guardaroba: document.getElementById("guardaroba"),
    guida: document.getElementById("guida"),
  };
  function setTab(name){
    tabs.forEach(t => t.classList.toggle("active", t.dataset.tab === name));
    Object.entries(sections).forEach(([k, el]) => el.style.display = (k===name ? "block":"none"));
    localStorage.setItem("vs2d_tab", name);
  }
  tabs.forEach(t => t.addEventListener("click", ()=> setTab(t.dataset.tab)));
  setTab(localStorage.getItem("vs2d_tab") || "studio");

  // State
  const KEY="sercuctech_vs2d_v1";
  const state = JSON.parse(localStorage.getItem(KEY) || "{}");
  state.profile ??= "uomo";
  state.person = state.person || { scale:1, x:0, y:0 };
  state.cloth  = state.cloth  || { scale:1, x:0, y:0, alpha:1, onTop:true };
  state.wardrobe ??= []; // {id,title,thumbDataUrl,fullDataUrl? (non salvo full per non pesare)}

  function save(){
    try{ localStorage.setItem(KEY, JSON.stringify(state)); }
    catch(e){ showErr("Memoria piena. Svuota cache o riduci immagini."); }
  }

  // DOM
  const profile = document.getElementById("profile");
  const personFile = document.getElementById("personFile");
  const clothFile = document.getElementById("clothFile");
  const personOk = document.getElementById("personOk");
  const clothOk = document.getElementById("clothOk");

  const personScale = document.getElementById("personScale");
  const personX = document.getElementById("personX");
  const personY = document.getElementById("personY");

  const clothScale = document.getElementById("clothScale");
  const clothX = document.getElementById("clothX");
  const clothY = document.getElementById("clothY");
  const clothAlpha = document.getElementById("clothAlpha");

  const hint = document.getElementById("hint");

  // Canvas stage
  const stage = document.getElementById("stage");
  const ctx = stage.getContext("2d");

  // Images in memory
  let personImg = null;
  let clothImg = null;

  // Helpers
  function clamp(n,a,b){ return Math.max(a, Math.min(b,n)); }

  async function fileToDataURL(file, maxSide=1600, quality=0.85){
    // compress for Android stability
    const raw = await new Promise((res, rej)=>{
      const r = new FileReader();
      r.onload = ()=> res(String(r.result||""));
      r.onerror = ()=> rej(new Error("Impossibile leggere file"));
      r.readAsDataURL(file);
    });

    const img = await new Promise((res, rej)=>{
      const im = new Image();
      im.onload = ()=> res(im);
      im.onerror = ()=> rej(new Error("Immagine non caricabile"));
      im.src = raw;
    });

    const w = img.naturalWidth || 1;
    const h = img.naturalHeight || 1;
    const s = Math.min(1, maxSide / Math.max(w,h));
    const nw = Math.round(w*s);
    const nh = Math.round(h*s);

    const c = document.createElement("canvas");
    c.width=nw; c.height=nh;
    const cctx = c.getContext("2d");
    cctx.drawImage(img,0,0,nw,nh);

    // if png maybe keep png; for photos use jpeg
    const isPng = (file.type||"").includes("png");
    return isPng ? c.toDataURL("image/png") : c.toDataURL("image/jpeg", quality);
  }

  async function dataURLToImage(dataUrl){
    return new Promise((res, rej)=>{
      const im = new Image();
      im.onload = ()=> res(im);
      im.onerror = ()=> rej(new Error("Immagine non caricabile"));
      im.src = dataUrl;
    });
  }

  function fitStage(){
    // responsive stage size
    const wrap = document.getElementById("stageWrap");
    const w = wrap.clientWidth;
    const h = Math.round(w * 1.25); // portrait ratio
    stage.width = Math.max(320, Math.min(980, Math.round(w)));
    stage.height = Math.max(420, Math.min(980, h));
  }
  window.addEventListener("resize", ()=>{ fitStage(); draw(); });

  function draw(){
    fitStage();

    ctx.clearRect(0,0,stage.width, stage.height);
    ctx.fillStyle = "#090912";
    ctx.fillRect(0,0,stage.width, stage.height);

    // guidelines
    ctx.globalAlpha = 1;
    ctx.strokeStyle = "rgba(255,255,255,.06)";
    ctx.lineWidth = 1;
    ctx.strokeRect(12, 12, stage.width-24, stage.height-24);

    const centerX = stage.width/2;
    const centerY = stage.height/2;

    // compute person transform
    const ps = Number(personScale.value);
    const px = Number(personX.value);
    const py = Number(personY.value);

    // compute cloth transform
    const cs = Number(clothScale.value);
    const cx = Number(clothX.value);
    const cy = Number(clothY.value);
    const ca = Number(clothAlpha.value);

    function drawImageCentered(img, scale, offX, offY){
      if(!img) return;
      const iw = img.naturalWidth || img.width;
      const ih = img.naturalHeight || img.height;

      const base = Math.min(stage.width*0.92/iw, stage.height*0.92/ih);
      const s = base * scale;

      const dw = iw * s;
      const dh = ih * s;

      const x = centerX - dw/2 + offX;
      const y = centerY - dh/2 + offY;

      ctx.drawImage(img, x, y, dw, dh);
    }

    // order: cloth under or above
    if(state.cloth.onTop === false){
      ctx.globalAlpha = ca;
      drawImageCentered(clothImg, cs, cx, cy);
      ctx.globalAlpha = 1;
      drawImageCentered(personImg, ps, px, py);
    } else {
      ctx.globalAlpha = 1;
      drawImageCentered(personImg, ps, px, py);
      ctx.globalAlpha = ca;
      drawImageCentered(clothImg, cs, cx, cy);
      ctx.globalAlpha = 1;
    }

    // hint
    const okP = !!personImg;
    const okC = !!clothImg;
    hint.style.display = (okP && okC) ? "none" : "block";
  }

  // init controls
  profile.value = state.profile;
  personScale.value = state.person.scale;
  personX.value = state.person.x;
  personY.value = state.person.y;

  clothScale.value = state.cloth.scale;
  clothX.value = state.cloth.x;
  clothY.value = state.cloth.y;
  clothAlpha.value = state.cloth.alpha;

  function syncToState(){
    state.profile = profile.value;
    state.person.scale = Number(personScale.value);
    state.person.x = Number(personX.value);
    state.person.y = Number(personY.value);

    state.cloth.scale = Number(clothScale.value);
    state.cloth.x = Number(clothX.value);
    state.cloth.y = Number(clothY.value);
    state.cloth.alpha = Number(clothAlpha.value);

    save();
    draw();
  }

  [profile, personScale, personX, personY, clothScale, clothX, clothY, clothAlpha].forEach(el=>{
    el.addEventListener("input", syncToState);
    el.addEventListener("change", syncToState);
  });

  document.getElementById("btnBringFront").addEventListener("click", ()=>{
    state.cloth.onTop = true; save(); draw();
  });
  document.getElementById("btnBringBack").addEventListener("click", ()=>{
    state.cloth.onTop = false; save(); draw();
  });

  // Dragging (move cloth by default; if holding 2 fingers => move person)
  let dragging = false;
  let last = {x:0,y:0};
  let dragTarget = "cloth"; // cloth/person

  stage.addEventListener("pointerdown", (e)=>{
    dragging = true;
    last = {x:e.clientX, y:e.clientY};
    dragTarget = e.shiftKey ? "person" : "cloth"; // desktop: shift to move person
    stage.setPointerCapture(e.pointerId);
  });
  stage.addEventListener("pointerup", ()=> dragging=false);
  stage.addEventListener("pointercancel", ()=> dragging=false);
  stage.addEventListener("pointermove", (e)=>{
    if(!dragging) return;
    const dx = e.clientX - last.x;
    const dy = e.clientY - last.y;
    last = {x:e.clientX, y:e.clientY};

    // scale movement a bit
    const mx = dx * 1.2;
    const my = dy * 1.2;

    if(dragTarget === "person"){
      personX.value = clamp(Number(personX.value) + mx, -250, 250);
      personY.value = clamp(Number(personY.value) + my, -300, 300);
    } else {
      clothX.value = clamp(Number(clothX.value) + mx, -250, 250);
      clothY.value = clamp(Number(clothY.value) + my, -300, 300);
    }
    syncToState();
  });

  // Upload person
  personFile.addEventListener("change", async ()=>{
    try{
      const f = personFile.files && personFile.files[0];
      if(!f) return;
      const dataUrl = await fileToDataURL(f, 1600, 0.85);
      personImg = await dataURLToImage(dataUrl);
      personOk.textContent = "OK";
      // reset a bit for best view
      personScale.value = 1.0;
      personX.value = 0;
      personY.value = 0;
      syncToState();
    }catch(e){ showErr(e.message || String(e)); }
    finally{ personFile.value = ""; }
  });

  // Upload cloth
  clothFile.addEventListener("change", async ()=>{
    try{
      const f = clothFile.files && clothFile.files[0];
      if(!f) return;
      const dataUrl = await fileToDataURL(f, 1400, 0.92);
      clothImg = await dataURLToImage(dataUrl);
      clothOk.textContent = "OK";
      clothScale.value = 1.0;
      clothX.value = 0;
      clothY.value = 0;
      clothAlpha.value = 1.0;
      state.cloth.onTop = true;
      syncToState();
    }catch(e){ showErr(e.message || String(e)); }
    finally{ clothFile.value = ""; }
  });

  // Export
  document.getElementById("btnExport").addEventListener("click", ()=>{
    try{
      // render once
      draw();
      const url = stage.toDataURL("image/png");
      const a = document.createElement("a");
      a.href = url;
      a.download = "SerCucTech-Look.png";
      a.click();
    }catch(e){ showErr("Export fallito: " + (e.message||String(e))); }
  });

  // Reset position
  document.getElementById("btnResetPose").addEventListener("click", ()=>{
    personScale.value = 1.0; personX.value = 0; personY.value = 0;
    clothScale.value = 1.0; clothX.value = 0; clothY.value = 0; clothAlpha.value = 1.0;
    state.cloth.onTop = true;
    syncToState();
  });

  // Clear all
  document.getElementById("btnClearAll").addEventListener("click", ()=>{
    personImg = null; clothImg = null;
    personOk.textContent = "NO";
    clothOk.textContent = "NO";
    state.wardrobe = [];
    save();
    renderWardrobe();
    draw();
  });

  // Wardrobe
  const wardrobeEl = document.getElementById("wardrobe");
  const wardCount = document.getElementById("wardCount");
  const btnAddItem = document.getElementById("btnAddItem");
  const wardFile = document.getElementById("wardFile");
  const btnClearWardrobe = document.getElementById("btnClearWardrobe");

  function makeId(){ return "i"+Math.random().toString(16).slice(2)+Date.now().toString(16); }

  function renderWardrobe(){
    wardrobeEl.innerHTML = "";
    wardCount.textContent = String(state.wardrobe.length);

    state.wardrobe.forEach((it, idx)=>{
      const card = document.createElement("div");
      card.className = "item";

      const th = document.createElement("div");
      th.className = "thumb";
      const im = document.createElement("img");
      im.src = it.thumb;
      th.appendChild(im);

      const meta = document.createElement("div");
      meta.className = "meta";

      const t = document.createElement("div");
      t.className = "t";
      t.textContent = it.title || "Capo";

      const s = document.createElement("div");
      s.className = "s";
      s.textContent = "PNG ‚Ä¢ overlay";

      const p = document.createElement("div");
      p.className = "p";

      const use = document.createElement("button");
      use.className = "btn primary";
      use.textContent = "Prova";
      use.addEventListener("click", async ()=>{
        try{
          // carico full se presente, altrimenti thumb (va bene)
          const dataUrl = it.full || it.thumb;
          clothImg = await dataURLToImage(dataUrl);
          clothOk.textContent = "OK";
          setTab("studio");
          clothScale.value = 1.0; clothX.value = 0; clothY.value = 0; clothAlpha.value = 1.0;
          state.cloth.onTop = true;
          syncToState();
        }catch(e){ showErr(e.message||String(e)); }
      });

      const del = document.createElement("button");
      del.className = "btn";
      del.textContent = "Elimina";
      del.addEventListener("click", ()=>{
        state.wardrobe.splice(idx,1);
        save();
        renderWardrobe();
      });

      p.appendChild(use);
      p.appendChild(del);

      meta.appendChild(t);
      meta.appendChild(s);
      meta.appendChild(p);

      card.appendChild(th);
      card.appendChild(meta);
      wardrobeEl.appendChild(card);
    });
  }

  btnAddItem.addEventListener("click", ()=> wardFile.click());

  wardFile.addEventListener("change", async ()=>{
    try{
      const f = wardFile.files && wardFile.files[0];
      if(!f) return;
      // thumb piccola
      const thumb = await fileToDataURL(f, 420, 0.9);
      // full (non enorme)
      const full = await fileToDataURL(f, 1200, 0.92);
      const item = { id: makeId(), title: f.name, thumb, full };
      state.wardrobe.unshift(item);
      save();
      renderWardrobe();
    }catch(e){ showErr(e.message||String(e)); }
    finally{ wardFile.value = ""; }
  });

  btnClearWardrobe.addEventListener("click", ()=>{
    state.wardrobe = [];
    save();
    renderWardrobe();
  });

  // init
  renderWardrobe();
  draw();
</script>
</body>
</html>
